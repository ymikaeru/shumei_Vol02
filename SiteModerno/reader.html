<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Ensinamentos de Meishu-Sama - Leitura</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="manifest" href="../../manifest.json">
  <link rel="icon" href="favicon.svg" type="image/svg+xml">
  <link rel="stylesheet" href="css/styles.css">
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body>
  <header class="header">
    <a href="index.html" class="header__logo">
      <div class="logo-circle">
        <div class="logo-dot"></div>
      </div>
      Biblioteca Sagrada
    </a>
    <div class="header__nav">
       <a href="index.html" style="font-weight:600; opacity:0.7;"><span>‚åÇ In√≠cio</span></a>
       <a href="index.html" data-tooltip="Mundo Espiritual„ÉªEsp√≠rito Precede a Mat√©ria„ÉªTransi√ß√£o da Noite para o Dia„ÉªCulto aos Antepassados"><span>Vol 1</span></a>
       <a href="shumeic2/index.html" data-tooltip="M√©todo Divino de Sa√∫de„ÉªAgricultura Natural"><span>Vol 2</span></a>
       <a href="shumeic3/index.html" data-tooltip="A Verdadeira F√©"><span>Vol 3</span></a>
       <a href="shumeic4/index.html" data-tooltip="Ensinamentos Complementares"><span>Vol 4</span></a>
       <select id="readerTopicSelect" class="btn-zen" onchange="location.hash=this.value" style="max-width:250px; display:none;">
            <option value="">Navega√ß√£o por Publica√ß√µes</option>
       </select>
    </div>
    <div class="controls">
      <button class="btn-zen" id="btn-index" onclick="toggleIndexDrawer()" title="√çndice do Volume">üìö</button>
      <button class="btn-zen" onclick="openSearch()" title="Buscar">üîç</button>
      <button class="btn-zen" onclick="toggleControlPanel()" title="Painel de Controle">‚öôÔ∏è</button>
    </div>
  </header>
  <main class="main">
    <div class="glass-pane" id="readerContainer">
        <div style="text-align:center; color:var(--text-muted)">Preparando leitura...</div>
    </div>
  </main>
  <script>
    
(function() {
    const checkAuth = () => {
        if (localStorage.getItem('shumei_auth') === 'true') return;

        const overlay = document.createElement('div');
        overlay.id = 'login-overlay';
        overlay.innerHTML = `
            <div class="login-card">
                <h2>Biblioteca Sagrada</h2>
                <p style="color: var(--text-muted); margin-bottom: 24px;">Insira a senha para acessar</p>
                <input type="password" id="login-pass" class="login-input" placeholder="Senha">
                <button id="login-submit" class="login-button">Entrar</button>
                <p id="login-error" style="color: #ff3b30; margin-top: 16px; font-size: 0.9rem; display: none;">Senha incorreta</p>
            </div>
        `;
        document.body.appendChild(overlay);

        const input = document.getElementById('login-pass');
        const submit = document.getElementById('login-submit');
        const error = document.getElementById('login-error');

        const attempt = () => {
            if (input.value === '567') {
                localStorage.setItem('shumei_auth', 'true');
                overlay.remove();
            } else {
                error.style.display = 'block';
                input.value = '';
                input.focus();
            }
        };

        submit.onclick = attempt;
        input.onkeypress = (e) => { if (e.key === 'Enter') attempt(); };
        input.focus();
    };

    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', checkAuth);
    } else {
        checkAuth();
    }
})();

  </script>

  <div class="search-modal-overlay" id="searchModal">
    <div class="search-modal">
      <div class="search-header">
        <div class="search-input-row">
          <input type="text" class="search-input" id="searchInput" placeholder="Buscar nos ensinamentos..." autocomplete="off">
          <button class="search-close" id="searchClose">&times;</button>
        </div>
        <div class="search-filters">
          <label class="filter-label"><input type="radio" name="searchFilter" value="all" checked> Tudo</label>
          <label class="filter-label"><input type="radio" name="searchFilter" value="title"> S√≥ T√≠tulo</label>
          <label class="filter-label"><input type="radio" name="searchFilter" value="content"> S√≥ Conte√∫do</label>
        </div>
      </div>
      <ul class="search-results" id="searchResults"></ul>
    </div>
  </div>

  <div class="search-modal-overlay" id="historyModal">
    <div class="search-modal">
      <div class="search-header">
        <h2 style="font-size: 1.2rem; margin:0; color: var(--accent);">Hist√≥rico de Navega√ß√£o</h2>
        <button class="search-close" onclick="closeHistory()">&times;</button>
      </div>
      <ul class="search-results" id="historyResults"></ul>
    </div>
  </div>

  <script src="js/toggle.js?v=1772160138"></script>
  <script src="js/reader.js?v=1772160138"></script>
</body>
</html>
